<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Upload image</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
	
	<link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="img/apple-touch-icon-57-precomposed.png">
  <link rel="shortcut icon" href="img/favicon.png">
  
	<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>

    <style>

        #image_preview {
            height: 140px;
        }

    </style>
</head>

<body>
<div class="container">
	<div class="row clearfix">
		<div class="col-md-12 column">
			<div class="jumbotron">
				<h1>
					Image uploader
				</h1>
				<p>
					Choose an existing image, or capture a photo to upload
				</p>
			</div>
		</div>
    <input type='file' accept='image/*' onchange='openFile(event)'><br>
    <img id='image_preview'>
    <canvas id='my_canvas'></canvas>
    <script>
      var openFile = function(event) {
        var input = event.target;
        var reader = new FileReader();
        reader.onload = function(){
            var dataURL = reader.result;
            var preview = document.getElementById('image_preview');
            preview.src = dataURL;
            var c = $("#my_canvas");
            var img = $("#image_preview");
            var w = img.width();
            var h = img.height();
            c.attr('height', h).attr('width', w);
//            c.width(w);
//            c.height(h);
            var ctx = c[0].getContext("2d");
            ctx.drawImage(img[0],0,0,w,h);
            var png_data = c[0].toDataURL("image/png");
        };
        reader.readAsDataURL(input.files[0]);
      };
    </script>
	</div>
</div>
</body>
</html>
