<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Upload image</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Fav and touch icons -->
	<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>

    <style>

        body {
            background-color: #fff;
        }

        #image_preview {
            margin: 5vh;
            height: 30vh;
            border-radius: 10px;
        }

        .container {
            width: 100%;
            height: 100vh;
        }

        h1 {
            text-align: center;
            color: #fff;
        }

        input {
            margin: 15px auto;
        }

        .bottom_row {
            position: absolute;
            top: 40vh;
            background-color: #888;
            height: 60vh;
            width: 100%;
            text-align: center;
        }

        .top_row {
            position: absolute;
            text-align: center;
            top: 0vh;
            height: 40vh;
            width: 100%;
            background-color: #BBB;
        }

        #my_canvas {
            display:none;
        }

        body, div, image {
            margin: 0;
            padding: 0;
        }


    </style>
</head>

<body>
<div class="container">
    <div class="top_row">
        <img id='image_preview' src="img/no_image.png">
    </div>
    <div class="bottom_row">
        <br>
        <input type='file' accept='image/*' capture="false" onchange='openFile(event)'>
        <br>
        <label for="text_input">Free text:</label><input id="text_input" type='text'>
    </div>
    <canvas id='my_canvas'></canvas>
    <script>
      var openFile = function(event) {
        var input = event.target;
        var reader = new FileReader();
        reader.onload = function(){
            var dataURL = reader.result;
            var preview = document.getElementById('image_preview');
            preview.src = dataURL;
            var c = $("#my_canvas");
            var img = $("#image_preview");
            var w = img.width();
            var h = img.height();
            c.attr('height', h).attr('width', w);
            var ctx = c[0].getContext("2d");
            ctx.drawImage(img[0],0,0,w,h);
            var png_data = c[0].toDataURL("image/png");
        };
        reader.readAsDataURL(input.files[0]);
      };
    </script>
	</div>
</div>
</body>
</html>
