<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Upload image</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Fav and touch icons -->
	<!--<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>-->

    <style>

        body {
            background-color: #fff;
        }

        #image_preview {
            margin: 5vh;
            height: 30vh;
            border-radius: 10px;
        }

        .container {
            width: 100%;
            height: 100vh;
        }

        h1 {
            text-align: center;
            color: #fff;
        }

        input {
            margin: 15px auto;
        }

        .bottom_row {
            position: absolute;
            top: 40vh;
            background-color: #888;
            height: 60vh;
            width: 100%;
            text-align: center;
        }

        .top_row {
            position: absolute;
            text-align: center;
            top: 0vh;
            height: 40vh;
            width: 100%;
            background-color: #BBB;
        }

        #text_input {
            width:50%;
            padding: 10px;
        }

        #my_canvas {
            display:none;
        }

        body, div, image {
            margin: 0;
            padding: 0;
        }


    </style>
</head>

<body>
<div class="container">
    <div class="top_row">
        <img id='image_preview' src="svg/magnifier13.svg">
    </div>
    <div class="bottom_row">
        <br>
        <input type='file' accept='image/*' capture="false" onchange='openFile(event)'>
        <br>
        <input id="text_input" type='text' onfocus="onFreeTextFocus()">
        <br>
        <button type="submit">Upload</button>
    </div>
    <canvas id='my_canvas'></canvas>
    <script>
        var default_input_value = " Enter text here..."
        var inp = document.getElementById('text_input');
        inp.value = default_input_value;
        inp.style.color = '#888';
        inp.style['font-style'] = 'italic';
        function onFreeTextFocus() {
            var inp = document.getElementById('text_input');
            if (inp.value==default_input_value) {
                inp.value = '';
                inp.style.color = '#000';
                inp.style['font-style'] = 'normal';
            }
        }
        function encodeAsPNG(img) {
            var c = document.getElementById("my_canvas")
            var w = img.style.width;
            var h = img.style.height;
            c.style.height = h;
            c.style.width = w;
            var ctx = c.getContext("2d");
            ctx.drawImage(img, 0, 0, w, h);
            return c.toDataURL("image/png");
        }
        var openFile = function(event) {
        var input = event.target;
        var reader = new FileReader();
        reader.onload = function(){
            var img = document.getElementById('image_preview');
            img.src = reader.result;
            //var png_data = encodeAsPNG(img);
        };
        reader.readAsDataURL(input.files[0]);
      };
    </script>
	</div>
</div>
</body>
</html>
