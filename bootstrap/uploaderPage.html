<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Upload image</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
	
	<link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
	<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>

    <style>

        body {
            background-color: #fff;
        }

        #image_preview {
            height: 140px;
        }

        .container {
            width: 95%;
        }

        .row1 {
            background-color: #444;
        }

        h1 {
            text-align: center;
            color: #fff;
        }

        input {
            margin: 15px auto;
        }

        .row2 {
            background-color: #888;
            text-align: center;
        }

        #my_canvas {
            display:none;
        }

        #image_preview {
            margin: 15px auto;
            display: block;
            #border: solid 3px blue;
            border-radius: 10px;
        }

        .row3 {
            background-color: #BBB;
        }

    </style>
</head>

<body>
<div class="container">
	<div class="row clearfix">
        <div class="col-md-12 column row3">
            <img id='image_preview' src="img/no_image.png">
        </div>
        <div class="col-md-12 column row2">
            <input type='file' accept='image/*' capture>
            <label for="text_input">Free text:</label><input id="text_input" type='text'>
        </div>
        <canvas id='my_canvas'></canvas>
    <script>
      var openFile = function(event) {
        var input = event.target;
        var reader = new FileReader();
        reader.onload = function(){
            var dataURL = reader.result;
            var preview = document.getElementById('image_preview');
            preview.src = dataURL;
            var c = $("#my_canvas");
            var img = $("#image_preview");
            var w = img.width();
            var h = img.height();
            c.attr('height', h).attr('width', w);
            var ctx = c[0].getContext("2d");
            ctx.drawImage(img[0],0,0,w,h);
            var png_data = c[0].toDataURL("image/png");
        };
        reader.readAsDataURL(input.files[0]);
      };
    </script>
	</div>
</div>
</body>
</html>
